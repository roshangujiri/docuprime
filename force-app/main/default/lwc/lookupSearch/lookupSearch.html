<template>
	<div class="slds-form-element">
		<!--Show field lable-->
		<template if:true={isrequired}>
			<label class="slds-form-element__label" for="combobox-id-2">
				<abbr class="slds-required" title="required">* </abbr>
				{lookupLabel} </label>
		</template>
		<template if:false={isrequired}>
			<label class="slds-form-element__label" for="combobox-id-2">{lookupLabel}</label>
		</template>

		<div class="slds-form-element__control">
			<div class="slds-combobox_container">
				<div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click slds-is-open"
					aria-expanded="true" aria-haspopup="listbox" role="combobox">
					<div data-key="pilldiv"
						class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_left-right"
						role="none">
						<span class="slds-icon_container slds-icon-standard-account slds-combobox__input-entity-icon"
							title="object">
							<!--Show icon-->
							<div class="slds-icon slds-icon_small" aria-hidden="true">
								<lightning-icon icon-name={iconName} size="small"></lightning-icon>
							</div>
							<span class="slds-assistive-text">Record</span>
						</span>
						<!--Show input text box to search-->
						<template if:false={isdisabled}>
							<template if:true={isrequired}>
								<input type="text" class={inputClass} id="combobox-id-5" name="combobox-id-5"
									aria-controls="listbox-id-5" role="textbox" placeholder="Search Objects..."
									value={selectedValue} onchange={handleKeyChange} onkeyup={handleKeyChange}
									required />
							</template>
							<template if:false={isrequired}>
								<input type="text" class="slds-input slds-combobox__input slds-combobox__input-value"
									id="combobox-id-6" name="combobox-id-6" aria-controls="listbox-id-6" role="textbox"
									placeholder="Search Objects..." value={selectedValue} onchange={handleKeyChange}
									onkeyup={handleKeyChange} />
							</template>
							<!--Show close button to remove selected record-->
							<button class="slds-button slds-button_icon slds-input__icon slds-input__icon_right"
								onclick={removeRecordOnLookup} title="Remove selected option">
								<span class="slds-button__icon" aria-hidden="true">
									<lightning-icon icon-name="utility:close" size="xx-Small"
										class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default"
										aria-hidden="true">
									</lightning-icon>
								</span>
								<span class="slds-assistive-text">Remove selected record</span>
							</button>
						</template>

						<template if:true={isdisabled}>
							<input type="text" class="slds-input slds-combobox__input slds-combobox__input-value"
								id="combobox-id-7" aria-controls="listbox-id-5" role="textbox"
								placeholder="Select an Option" value={selectedValue} onchange={handleKeyChange}
								onkeyup={handleKeyChange} disabled />
						</template>
					</div>
					<!--Show list of records to display-->
					<ul>
						<template for:each={recordsList} for:item="record">
							<li id={record} key={record} onclick={onRecordSelection} role="presentation"
								class="slds-listbox__item">
								<div data-key={record} data-name={record}
									class="slds-media slds-listbox__option slds-listbox__option_entity slds-listbox__option_has-meta"
									role="option">
									<span class="slds-media__figure slds-listbox__option-icon">
										<span class="slds-icon_container">
											<lightning-icon icon-name={iconName} size="small"></lightning-icon>
										</span>
									</span>
									<span class="slds-media__body">
										<span data-key={record} data-name={record}
											class="slds-listbox__option-text slds-listbox__option-text_entity slds-p-bottom--x-small">{record}
										</span>
									</span>
								</div>
							</li>
						</template>
					</ul>
				</div>
			</div>
		</div>
		<template if:true={showErrorMessage}>
			<div class="slds-form-element__help slds-has-error" id="form-error-01" style="color: red">Complete this
				field.</div>
		</template>
	</div>
</template>